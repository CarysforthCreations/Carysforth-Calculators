<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Carysforth Calculators — LCWRA Tools</title>
<meta name="description" content="Free Universal Credit LCWRA calculators for advisers by Carysforth Creations. Stacked view with print/PDF support and legal disclaimer." />
<link rel="icon" href="favicon.ico" />
<style>
  :root{ --teal:#008080; --lemon:#FFD60A; --ink:#0f172a; }
  *{box-sizing:border-box}
  body{font-family:system-ui,Segoe UI,Arial,sans-serif;margin:24px;max-width:980px;color:var(--ink);background:#ffffff}
  h1{font-size:1.8rem;margin:0 0 .25rem 0;color:var(--teal)}
  h2{font-size:1.25rem;margin:0 0 .25rem 0;color:var(--teal)}
  .muted{color:#475569}
  .banner{padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,var(--teal),var(--lemon));color:#0b1020;font-weight:800;margin-bottom:12px}
  .card{border:1px solid #e5e7eb;border-radius:14px;padding:16px;margin:12px 0;background:white;box-shadow:0 1px 2px rgba(0,0,0,.05)}
  label{display:block;font-weight:600;margin:.5rem 0 .25rem}
  input,button,textarea{font-size:1rem;padding:.55rem .7rem;border:1px solid #cbd5e1;border-radius:10px;box-sizing:border-box}
  input[type="number"],input[type="date"],textarea{width:100%}
  input[readonly]{background:#f8fafc;color:#475569}
  .btn{background:linear-gradient(90deg,var(--teal),var(--lemon));color:#0b1020;border:none;cursor:pointer;font-weight:700}
  .btn:hover{filter:brightness(1.05)}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .result-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;align-items:center;margin-bottom:6px}
  .result-row strong{font-weight:700}
  .result-row div{padding:10px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;font-family:ui-monospace,Menlo,Consolas,monospace}
  .disclaimer{background:#fffbea;border:1px solid #fde68a;border-radius:10px;padding:12px;margin:16px 0;color:#7c5b00}
  .legal{background:#f6f7ff;border:1px solid #d9dafe;border-radius:10px;padding:12px;margin:16px 0;color:#222}
  footer{margin-top:24px;color:#64748b;font-size:.9rem;text-align:center}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
  .btnline{display:flex;gap:8px;flex-wrap:wrap}
  @media print{
    body{margin:10mm; max-width:none}
    .btnline, .topbar button{display:none !important}
    .card{page-break-inside:avoid}
    .result-row{page-break-inside:avoid}
    .legal, .disclaimer, footer{page-break-inside:avoid}
    #printHeader{display:block !important; margin-bottom:8mm; border-bottom:2px solid var(--teal); padding-bottom:4mm;}
  }
  #printHeader{display:none}
  @media (max-width:720px){
    .grid2{grid-template-columns:1fr}
    .result-row{grid-template-columns:1fr;gap:6px}
    .result-row div{grid-column:auto}
  }
</style>
</head>
<body>
<div class="banner">Carysforth Creations — LCWRA Calculators (Web Version)</div>

<div id="printHeader">
  <h1>Carysforth Creations — LCWRA Calculators (Printed Copy)</h1>
  <p class="muted">This document includes both calculators, legal disclaimers, and © Carysforth Creations.</p>
</div>

<div class="topbar">
  <div>
    <h1>Universal Credit — LCWRA Calculators</h1>
    <p class="muted">Both calculators are visible below. Calculations follow month‑end AP rules and weekend payday adjustments.</p>
  </div>
  <div class="btnline">
    <button id="printBtn" class="btn" title="Print or Save as PDF">Print / Save as PDF</button>
  </div>
</div>

<!-- Calculator 1 -->
<div id="calc1" class="card">
  <h2>LCWRA Assessment Period Calculator</h2>
  <p class="muted">Enter: (1) the date you start the WCA (“start of relevant period”) and (2) the usual day of month your AP starts (1–31). The tool applies UC rules for month‑end days and computes the AP that includes LCWRA and the expected payday (7 days after AP end; weekends roll back; optional UK bank holidays supported).</p>

  <div class="disclaimer">
    <p><strong>Important:</strong> This calculator might be wrong and cannot replace advice. Hopefully it is a useful tool for advisers. If you are an existing UC claimant without a previous work capability determination, this calculator should help determine the LCWRA start AP and indicative payday.</p>
  </div>

  <div class="card">
    <div class="grid2">
      <div>
        <label for="c1_startDate">Start of relevant period (WCA start)</label>
        <input type="date" id="c1_startDate" />
      </div>
      <div>
        <label for="c1_usualDay">Usual AP start day (1–31)</label>
        <input type="number" id="c1_usualDay" min="1" max="31" value="31" />
      </div>
    </div>
    <label for="c1_hols">Optional UK bank holidays (one date per line, yyyy-mm-dd)</label>
    <textarea id="c1_hols" rows="3" placeholder="2026-01-01&#10;2026-03-30"></textarea>
    <div style="margin-top:12px"><button id="c1_calcBtn" class="btn">Calculate</button></div>
  </div>

  <div id="c1_results" class="card" style="display:none">
    <div class="result-row">
      <strong>Relevant period</strong>
      <div id="c1_startRelevant"></div>
      <div id="c1_endRelevant"></div>
    </div>
    <div class="result-row">
      <strong>AP in which relevant period ends</strong>
      <div id="c1_startAPContainingEnd"></div>
      <div id="c1_endAPContainingEnd"></div>
    </div>
    <div class="result-row">
      <strong>AP that includes LCWRA</strong>
      <div id="c1_startAPLCWRA"></div>
      <div id="c1_endAPLCWRA"></div>
    </div>
    <div class="result-row">
      <strong>Expected first payday with LCWRA</strong>
      <div id="c1_payday" style="grid-column:2 / span 2"></div>
    </div>
  </div>

  <div class="legal">
    <strong>Legal notice (Calculator 1).</strong> This tool is provided “as is” for general information only and does not constitute advice. Carysforth Creations and the authors make no representations or warranties, express or implied, about accuracy, completeness, or suitability for any purpose. Use at your own risk. To the fullest extent permitted by law, we disclaim all liability for loss or damage of any kind arising from reliance on this tool. Always verify outcomes against official regulations and obtain professional advice where needed.
  </div>
</div>

<!-- Calculator 2 -->
<div id="calc2" class="card">
  <h2>Last Date to Start the Work Capability Process (Pre‑April 2026)</h2>
  <p class="muted"><strong>This calculator identifies the last day that an existing Universal Credit claimant</strong> (without a previous ESA or work capability determination) <strong>can start the work capability process to be a ‘pre‑April 2026’ LCWRA claimant</strong> and receive the protected LCWRA rate.</p>

  <div class="disclaimer">
    <p><strong>Disclaimer:</strong> This calculator might be wrong and cannot replace advice. Hopefully it is a useful tool for advisers. If you are an existing UC claimant without a previous work capability determination, this calculator should determine the last date for starting the work capability process.</p>
  </div>

  <div class="card">
    <div class="grid2">
      <div>
        <label for="c2_startDay">Start day of assessment period (1–31)</label>
        <input id="c2_startDay" type="number" min="1" max="31" value="28" />
      </div>
      <div>
        <label for="c2_relevantDate">Relevant date</label>
        <input id="c2_relevantDate" type="date" value="2026-04-05" readonly />
      </div>
    </div>
    <div style="margin-top:12px"><button id="c2_calcBtn" class="btn">Calculate</button></div>
  </div>

  <div id="c2_results" class="card" style="display:none">
    <div class="result-row">
      <strong>Assessment Period (containing 5 Apr 2026)</strong>
      <div id="c2_apStart"></div>
      <div id="c2_apEnd"></div>
    </div>
    <div class="result-row">
      <strong>Last date to start WCA process</strong>
      <div id="c2_lastStart" style="grid-column:2 / span 2"></div>
    </div>
  </div>

  <div class="legal">
    <strong>Legal notice (Calculator 2).</strong> This tool is provided “as is” for general information only and does not constitute advice. Carysforth Creations and the authors make no representations or warranties, express or implied, about accuracy, completeness, or suitability for any purpose. Use at your own risk. To the fullest extent permitted by law, we disclaim all liability for loss or damage of any kind arising from reliance on this tool. Always verify outcomes against official regulations and obtain professional advice where needed.
  </div>
</div>

<footer>© Carysforth Creations</footer>

<script>
function clone(d){return new Date(d.getFullYear(), d.getMonth(), d.getDate());}
function endOfMonth(d){return new Date(d.getFullYear(), d.getMonth()+1, 0);}
function addDays(d,n){const x=clone(d); x.setDate(x.getDate()+n); return x;}
function addMonths(d,n){const y=d.getFullYear(), m=d.getMonth(); const t=new Date(y, m+n, d.getDate());
  const last=new Date(y, m+n+1, 0).getDate();
  t.setDate(Math.min(d.getDate(), last));
  return t;
}
function clampToMonth(uslDay, date){
  const last=endOfMonth(date).getDate();
  return new Date(date.getFullYear(), date.getMonth(), Math.min(uslDay, last));
}
function apStartContaining(date, usualDay){
  const startThis = clampToMonth(usualDay, date);
  if (date >= startThis) return startThis;
  const prevMonth = new Date(date.getFullYear(), date.getMonth()-1, 15);
  return clampToMonth(usualDay, prevMonth);
}
function nextAPStart(apStart, usualDay){
  const nextMonth = new Date(apStart.getFullYear(), apStart.getMonth()+1, 15);
  return clampToMonth(usualDay, nextMonth);
}
function apEndFromStart(apStart, usualDay){
  const nextStart = nextAPStart(apStart, usualDay);
  return addDays(nextStart, -1);
}
function toISO(d){return d.toISOString().slice(0,10);}
function isWeekend(d){const w=d.getDay(); return w===0 || w===6;}
function buildHolidaySet(text){
  const s=new Set();
  (text||"").split(/\s+/).forEach(line=>{ if(/^\d{4}-\d{2}-\d{2}$/.test(line.trim())) s.add(line.trim()); });
  return s;
}
function previousWorkingDay(target, holidays){
  let d=clone(target);
  while (isWeekend(d) || holidays.has(d.toISOString().slice(0,10))) d = addDays(d, -1);
  return d;
}
function fmt(d){return d.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});}

document.getElementById('c1_calcBtn').addEventListener('click', ()=>{
  const startStr = document.getElementById('c1_startDate').value;
  const usualDay = Number(document.getElementById('c1_usualDay').value);
  const holSet = buildHolidaySet(document.getElementById('c1_hols').value);

  if(!startStr || !(usualDay>=1 && usualDay<=31)){ alert("Please enter a valid start date and a usual AP start day between 1 and 31."); return; }

  const startRelevant = new Date(startStr+"T00:00:00");
  const endRelevant = addDays(addMonths(startRelevant,3), -1);
  const apStartContainingEnd = apStartContaining(endRelevant, usualDay);
  const apEndContainingEnd = apEndFromStart(apStartContainingEnd, usualDay);
  const apStartLCWRA = nextAPStart(apStartContainingEnd, usualDay);
  const apEndLCWRA = apEndFromStart(apStartLCWRA, usualDay);
  const targetPay = addDays(apEndLCWRA, 7);
  const payday = previousWorkingDay(targetPay, holSet);

  document.getElementById('c1_startRelevant').textContent = fmt(startRelevant);
  document.getElementById('c1_endRelevant').textContent = fmt(endRelevant);
  document.getElementById('c1_startAPContainingEnd').textContent = fmt(apStartContainingEnd);
  document.getElementById('c1_endAPContainingEnd').textContent = fmt(apEndContainingEnd);
  document.getElementById('c1_startAPLCWRA').textContent = fmt(apStartLCWRA);
  document.getElementById('c1_endAPLCWRA').textContent = fmt(apEndLCWRA);
  document.getElementById('c1_payday').textContent = payday.toLocaleDateString("en-GB",{weekday:"short", day:"2-digit", month:"2-digit", year:"numeric"});
  document.getElementById('c1_results').style.display = "block";
});

document.getElementById('c2_calcBtn').addEventListener('click', ()=>{
  const sd = Number(document.getElementById('c2_startDay').value);
  const rdStr = document.getElementById('c2_relevantDate').value;
  if(!(sd>=1 && sd<=31) || !rdStr){ alert('Enter a start day 1–31 and a valid Relevant date.'); return; }
  const relevantDate = new Date(rdStr + 'T00:00:00');

  const apStart = apStartContaining(relevantDate, sd);
  const apEnd = addDays(nextAPStart(apStart, sd), -1);
  const lastStart = new Date(apStart); lastStart.setMonth(lastStart.getMonth()-3);

  document.getElementById('c2_apStart').textContent = fmt(apStart);
  document.getElementById('c2_apEnd').textContent = fmt(apEnd);
  document.getElementById('c2_lastStart').textContent = fmt(lastStart);
  document.getElementById('c2_results').style.display = 'block';
});

document.getElementById('printBtn').addEventListener('click', ()=>window.print());
</script>
</body>
</html>